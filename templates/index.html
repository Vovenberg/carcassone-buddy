{% extends "/base.html" %} {% block content %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<header class="app-header">
    <h1>Carcassone Buddy</h1>
</header>

<!-- –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ä—Ç–∞ –∏–≥—Ä—ã -->
{% if not active_player %}
<div class="card game-start-card">
    <label for="start-config-players-input" class="card-label"
        >üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</label
    >
    <textarea
        id="start-config-players-input"
        name="players"
        rows="6"
        cols="40"
        class="players-input"
        placeholder
    >
–í–æ–≤–∞,–õ—é–±–∞</textarea
    >

    <button
        class="key-btn start-btn"
        hx-post="/carcassone-buddy/start"
        hx-include="#start-config-players-input"
        hx-target="body"
        hx-swap="outerHTML"
    >
        üéÆ –°—Ç–∞—Ä—Ç
    </button>
</div>
{% endif %} {% if active_player %}
<!-- –ü–∞–Ω–µ–ª—å —Å—á–µ—Ç—á–∏–∫–∞ –æ—á–∫–æ–≤ -->
<div class="score-panel card">
    <div id="score-display">{% include 'partials/score_display.html' %}</div>
</div>

<div class="players-panel">
    {% for player in players %}
    <button
        class="player-btn"
        hx-post="/carcassone-buddy/toggle_player"
        hx-vals='{"player": "{{player}}"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        {{player}}
    </button>
    {% endfor %}
</div>

<!-- –¶–∏—Ñ—Ä–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ -->
<div class="keypad">
    <!-- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ -->
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "1"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        1
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "2"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        2
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "3"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        3
    </button>
    <button
        class="key-btn operator"
        hx-post="/carcassone-buddy/input_operator"
        hx-vals='{"operator": "+"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        +
    </button>

    <!-- –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ -->
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "4"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        4
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "5"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        5
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "6"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        6
    </button>
    <button
        class="key-btn operator"
        hx-post="/carcassone-buddy/input_operator"
        hx-vals='{"operator": "-"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        -
    </button>

    <!-- –¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞ -->
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "7"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        7
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "8"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        8
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "9"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        9
    </button>
    <button
        class="key-btn enter"
        hx-post="/carcassone-buddy/calculate"
        hx-target="body"
        hx-swap="outerHTML"
    >
        Enter
    </button>

    <!-- –ß–µ—Ç–≤–µ—Ä—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ -->
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "10"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        10
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "20"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        20
    </button>
    <button
        class="key-btn number"
        hx-post="/carcassone-buddy/input_number"
        hx-vals='{"number": "30"}'
        hx-target="#score-display"
        hx-swap="innerHTML"
    >
        30
    </button>
</div>

<!-- –ü–∞–Ω–µ–ª—å –∏—Å—Ç–æ—Ä–∏–∏ -->
<div class="history">
    <strong>–ò—Å—Ç–æ—Ä–∏—è:</strong>
    {% if history %}
    <ul>
        {% for item in history|reverse() %}
        <li>
            {{ item.player }}: {{item.old_score}} ({{item.formula}}) =
            {{item.new_score}}
        </li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endif %} {% if not active_player %}
<div class="history">
    <strong>–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä:</strong>
    {% if game_history %}
    <ul>
        {% for item in game_history|reverse() %}
        <li>{{ item.start_date }}: {{item.players}}</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endif %} {% if active_player %}
<button
    class="key-btn end-btn"
    hx-post="/carcassone-buddy/end"
    hx-target="body"
    hx-swap="outerHTML"
>
    –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É
</button>
{% endif %} {% endblock %}
